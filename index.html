<html>

<head>
    <title>mtv_dl_web</title>
</head>

<body>
    <h1>mtv_dl_web</h1>
    <div>

        <input type="text" id="query" value="" />
        <button onclick="ShowSearchResults()" id="search">search</button>
    </div>

    <p id="searchResults"></p>
    <script src="https://code.jquery.com/jquery-3.5.0.js"></script>
    <script>
        $(document).ready(function () {
            $('#query').keypress(function (e) {
                if (e.keyCode == 13)
                    $('#search').click();
            });
        });

        function ShowSearchResults() {
            const query = document.getElementById('query').value;
            $.getJSON('/search', { query: query }, function (searchResults) {
                // JSON result in `data` variable
                // CREATE DYNAMIC TABLE.
                var table = document.createElement("table");

                // CREATE HTML TABLE HEADER.

                var col = ["hash", "channel", "title", "topic", "size", "start", "duration", "age", "region", "downloaded"]
                var tr = table.insertRow(-1);                   // TABLE ROW.

                for (var i = 0; i < col.length; i++) {
                    var th = document.createElement("th");      // TABLE HEADER.
                    th.innerHTML = col[i];
                    tr.appendChild(th);
                }

                // ADD JSON DATA TO THE TABLE AS ROWS.
                for (var i = 0; i < searchResults.length; i++) {

                    tr = table.insertRow(-1);

                    for (var j = 0; j < col.length; j++) {
                        var tabCell = tr.insertCell(-1);
                        tabCell.innerHTML = searchResults[i][col[j]];
                    }
                }

                // FINALLY ADD THE NEWLY CREATED TABLE WITH JSON DATA TO A CONTAINER.
                var divContainer = document.getElementById("searchResults");
                divContainer.innerHTML = "";
                divContainer.appendChild(table);
            });
        }
    </script>


</body>

</html>